phylesystem: a git-based data store for community-curated phylogenetic estimates downloaded from motivation: phylogenetic estimates from published studies can be archived using general platforms like dryad (vision, 2010) or treebase (sanderson et al., 1994). such services fulfill a crucial role in ensuring transparency and reproducibility in phylogenetic research. however, digital tree data files often require some editing (e.g. rerooting) to improve the accuracy and reusability of the phylogenetic statements. furthermore, establishing the mapping between tip labels used in a tree and taxa in a single common taxonomy dramatically improves the ability of other researchers to re-use phylogenetic estimates. as the process of curating a published phylogenetic estimate is not error-free, retaining a full record of the provenance of edits to a tree is crucial for openness, allowing editors to receive credit for their work and making errors introduced during curation easier to correct. results: here, we report the development of software infrastructure to support the open curation of phylogenetic data by the community of biologists. the backend of the system provides an interface for the standard database operations of creating, reading, updating and deleting records by making commits to a git repository. the record of the history of edits to a tree is preserved by gits version control features. hosting this data store on github (http://github.com/) provides open access to the data store using tools familiar to many developers. we have deployed a server running the phylesystem-api, which wraps the interactions with git and github. the open tree of life project has also developed and deployed a javascript application that uses the phylesystem-api and other web services to enable input and curation of published phylogenetic statements. availability and implementation: source code for the web service layer is available at https:// github.com/opentreeoflife/phylesystem-api. the data store can be cloned from: https://github. com/opentreeoflife/phylesystem. a web application that uses the phylesystem web services is deployed at http://tree.opentreeoflife.org/curator. code for that tool is available from https://github. com/opentreeoflife/opentree. contact:characterizing and systematizing relationships among species has been a goal of biologists since linnaeus (1758). the phylogenetic systematics revolution of the 1960s focused most of the effort toward this goal on the task of estimating phylogenetic relationships. the rapid growth in availability of molecular data, the development of models and software implementations for inferring phylogenies, and the appreciation of the explanatory power of phylogenetically aware comparative methods have led to dramatic increases in the number of published phylogenetic hypotheses. unfortunately, capturing the inputs and outputs of a phylogenetic analysis in a rich, standardized form is difficult and error prone. there is no single standard for phylogenetic data, and developers of phylogenetic software often create new formats or extend existing formats in ways that make them incompatible with other programs. some archiving services, such as dryad , have reacted to this challenge by accepting a wide range of inputs and making few or no guarantees to users of the database that the records will be in any particular form. this encourages sharing of data by making the submission process fast and easy. however, if the authors submitting the data are not conscientious in their explanations of the data, it can be difficult for users of the data to reliably extract all the necessary information from the archive, or the data may not contain sufficient metadata for reuse. on the opposite end of the spectrum, some databases require data providers to conform to strict standards with respect to input format and content. examples of this approach are treebase and its successor treebase version 2 . since 1994, treebase has served as the primary archival data store for phylogenetic estimates and the data that these trees are based on. as of 2014, treebase contains 4076 studies and over 12 800 trees (http://treebase.org/treebase-web/home.html). many journals encourage or require that each publication that estimates phylogenetic trees cite a treebase deposit containing the associated trees. treebase produces a much more feature-rich interface for phylogenetic queries than dryad, because each treebase submission is parsed thoroughly and converted to a set of records in a relational database. the downside of this approach is that it requires that submissions correspond to a uniform format. without constant updating, that format may not reflect new types of phylogenetic data being generated. unfortunately, tree estimation tools read and write file formats which are idiosyncratic and often so terse that they omit useful information about the analysis. seefor discussions of this topic and other challenges relating to the archiving of phylogenetic estimates. as a result, the treebase submission process usually requires the authors of a data package to reformat their data, correct the rooting of the tree, alter the labels of the tips of the tree, etc. because these steps are often taken after the analyses for a publication are complete, it is likely that errors introduced in the process of preparing a submission will not be corrected until an observant user tries to reuse the data. if there were a rich, universally used file format for phylogenetics analyses, then import constraints such as those used by treebase would be less of a hurdle, because the critical metadata regarding rooting, labels, etc. would be stored alongside the tree itself. the xml-based nexml specification defines such a format, but it is not currently used widely by tree estimation tools. thus, the current state of phyloinformatic archival infrastructure is ripe for improvement in numerous ways. one such opportunity is the development of a data store that allows the community of biologists to improve the accuracy and reusability of phylogenetic statements associated with publications. we describe here an implementation of one such system, which we call phylesystem because it uses a set of versioned text files on the filesystem. the phylesystem component of the open tree of life web infrastructure was built to fulfill a critical need for that project: in the process of producing a synthetic estimate of what we know about the phylogeny of life on earth , information from published studies had to be curated. the goal of phylesystem is not to replace systems like dryad or treebase, but to complement them by storing phylogenetic statements and associated metadata in a consistent format while retaining the history of edits that were made to the data themselves. we anticipate that most of the trees stored in phylesystem will be associated with permanent, static archives elsewhere (usually either treebase or dryad).phylogenetic hypotheses are simultaneously the products of analyses and the raw material for future analyses. a phylogenetic data store has the advantage of collapsing potentially enormous raw sequence datasets into compact files capturing the inferred evolutionary history of studied taxa . however, the raw output of phylogenetic analyses is rarely sufficient for immediate reuse by other researchers. this curation primarily consists of correcting the rooting of the tree (so that it reflects the finding of the published study), adding metadata about the data or analyses that produced the tree, and mapping the otu labels to taxa in a taxonomy. therefore, having a specialty data store to capture the appropriate metadata is essential. the phylesystem tool was designed to fill this role in a way that would make the curated data as widely available as possible. by using git as a primary data store, the system allows other interested parties to easily maintain local clones of all the data. data archives in bioinformatics have a wide range of goals and requirements. using git in place of a typical database is feasible for only a small set of uses which do not require fast processing of a large number of requests. when it is feasible to use distributed version control as a data store, there are several benefits that make this approach appealing. provenance information in the form of a commit message associated with an identification of the user creating the edit is stored for free in such an architecture. each modification to the data store is backed up efficiently using the vcss push functionality. the corpus of the data store can be made openly available in a form that is very convenient to other bioinformaticians. rather than having to unpack a new snapshot and write a script to identify what information has changed since the last snapshot was retrieved, a user can easily pull down the latest changes (with a git pull origin master command in the case of a git-based store). not only will this update be fast, the user knows that he or she can back up to a previous version of the data store if needed using the standard version control features. this git-based curated database model could be applied to other data stores requiring community curation. the file format of the data to be versioned also has an impact on whether or not it is feasible to use a vcs as a data store. the native tools for comparing versions of a file are line-based. ideally, such a system would version file formats in which: (i) each datum in a collection is described on a different line, (ii) each line is relatively independent, and (iii) the order of elements in the serialized file can be made consistent. the otnexson format that we are currently using is not ideal in these respects. some operations, such as rerooting a tree, affect many lines in a file (i.e. many branches change source to target orientation). thus far, the rate of curation has been low enough that most merges have been unambiguous because only one branch of the git history has changed a particular study. the phylesystem currently avoids potentially incompatible merges, and warns the user who committed later that his or her changes have been saved but not merged onto the primary branch. a diff and merge tool that operates on the object model has been written and is currently under testing. git does not handle very large files well, and github limits the size of individual files to 100 mb and repositories to around 1 gb. sharding precludes problems with overall repository size. we have specifically limited the data types to be included in the phylesystem. alignments and bootstrapping or mcmc chain replicates of trees should not be included in uploads, and there is currently a 20 mb filesize cap on files committed to the repository. the choice to exclude alignments and tree replicates has the advantages of limiting the file sizes in the repository and maintaining the focus of the database. phylesystem is for the storage and curation of phylogenetic estimates. other resources, such as data dryad , are more appropriate for other static data associated with analyses. if it becomes necessary due to increases in the size of trees, it is straightforward to alter the 20 mb limit. while there are general approaches to expand the scale of versioned data tools (see, e.g. git-annex and dat [http://dat-data.com/]), we anticipate that phylesystem will continue to rely on links outs to the full archives of data to accommodate large studies. while phylesystem currently uses github for user authentication and to host a readily accessible copy of the repository, the database does not inherently rely on github and could be migrated should the need arise. this would require only altering the authentication procedure in the curation webapp and implementing an alternate trigger for updates to oti. because the push of data to github triggers the webhooks, the code which performs the push could be extended to call the web-hooks if the project migrates away from github. as discussed by others , the rate of deposit of phylogenetic estimates into public archives is currently low. it is also clear that the trees available in digital archives often need some curation. the two most common curation needs are rooting of phylogenies, and the mapping of idiosyncratic tip labels to a uniform naming system or taxonomy. rooting is necessary because many phylogenetics software return unrooted trees as product of analyses. these trees are correctly rooted using an outgroup and displayed in figures in publications, but often this rooting information is not included in the tree file deposited in repositories. this is a large task because the number of phylogenies published each year is large. furthermore, some aspects of the curation (most notably verifying that the tip labels are correctly aligned to a taxonomy) require a significant amount of expertize and time investment. it is unclear whether there is a way to motivate the broader community of systematic biologists to invest their time in helping curate a collection of phylogenetic knowledge like phylesystem. many of the design decisions behind phylesystem reflect a desire to alleviate some potential concerns of data curators. by making the data store publicly accessible as flat files which can be synchronized using robust version control operations, we have tried to lessen concerns that the curation effort is being donated to a resource which might disappear after the end of the open tree of life project. by preserving the history of each commit, we hope to make the data transformation process more transparent, but also make it easier for curators to obtain proper credit for their work. while the curated trees in phylesystem could in theory be exported back to static repositories such as dryad or treebase, this is not necessary. the aim of these resources differs and complement one another. curation edits to data in phylesystem make the data more interoperable and reusable, while the archival storage is crucial for replicating the results of a published study exactly. the original labels on tips and rooting position are maintained in the otnexson files (as well as in the git history). thus, it is straightforward to associate the edits made during curation back to the original data. the design of the data store was also intended to motivate other bioinformaticians to build tools to work with these data. in a traditional database-driven resource, the code used to pull information from the private database is quite distinct from the code written by users of the data. however, in phylesystem the server code and client code both deal with the same json file format. thus, developers can easily reuse the codebase of the phylesystem-api as they write new functionalities that use data from phylesystem or even host their own web services using the data. almost all of the git operations and otnexson handling operations are implemented in the standalone library, peyotl. this is intended to make it easier for other programmers to clone the data store and work with it locally. to improve the transparency of the software development process, we use issue trackers to report problematic behavior and request new features. this also improves the sustainability of the software development efforts because the motivations behind the implementation decisions are documented. unit-tests in the peyotl library verify that the otnexson validation and git interactions are behaving as expected. the phylesystem-api repository contains a set of integration tests that automate testing of the series of api calls that are expected during curation. automated testing also improves the software sustainability by helping to identify regressions in behavior as new features are implemented.we have developed a git-based data store for archiving and curating phylogenetic estimates of species relationships. by incorporating curation into the data storage, we have lowered the activation cost of entering data into an archive while also allowing continued curation, whether by the original authors or researchers interested in re-using these data, to improve the associated metadata. using the git vcs allows us to track data curation and maintain provenance, while simultaneously making it straightforward for researchers to maintain their own updatable copies of the database.  
