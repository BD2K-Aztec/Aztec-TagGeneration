databases and ontologies deriving the consequences of genomic variants with the ensembl api and snp effect predictor a tool to predict the effect that newly discovered genomic variants have on known transcripts is indispensible in prioritizing and categorizing such variants. in ensembl, a web-based tool (the snp effect predictor) and api interface can now functionally annotate variants in all ensembl and ensembl genomes supported species. availability: the ensembl snp effect predictor can be accessed via the ensembl website at http://www.ensembl.org/. the ensembl api (http://www.ensembl.org/info/docs/api/ api_installation.html for installation instructions) is open source software. contact:as costs of resequencing and genotyping fall, increasing amounts of variation data are being produced that cannot be annotated effectively without access to considerable computational resources and genomic annotation databases. often the most valuable information to know about a variant is the effect the observed alleles have on transcripts, which may aid selection of variations for genotyping studies and in turn have a part to play in the discovery of new drug targets and other biologically significant loci. deriving this information manually is laborious and error-prone, impractical for large sets of data and impossible without access to suitable genomic annotation resources. of critical interest is the existence of any novel variant positions within a dataset, and what information is available for known variant loci. although these answers are available through dbsnp , the process of submitting the data to the ncbi to be processed and annotated can often take months and requires the data to be made public. even before the developments reported in this article, ensembl could also be used to derive similar annotation by setting up a full local ensembl database containing the variant information and running scripts from the ensembl variation database production pipeline. other tools available for the annotation of single nucleotide polymorphisms (snps) in humans are comprehensively reviewed in karchin (2008).variation api exists to retrieve variation data such as snps, insertions and deletions from ensembl databases. entities such as variants are represented as objects, created by adaptors that act as factories for generating specific objects. example code demonstrating the use of the api to derive consequences for a list of variant positions is shown in supplementary. documentation on the api is found at http://www.ensembl.org/info/docs/pdoc/ensemblvariation/index.html. given a variant position, the api retrieves overlapping transcripts from the ensembl core database and determines where in the transcript structure the variant falls. if the variant falls within an exon, new codons for each variant allele are derived and compared to the reference codon. the location of the variant relative to regulatory regions is also assessed using the ensembl functional genomics database where available. the results, including amino acid changes and relative positions in the cdna and peptide sequences, are stored in the resulting transcript variation objects, along with one or more named consequence types. at present ensembl provides only a perl api, but enabled by the open source nature of the project python (pycogent, http://pycogent.sourceforge.net/examples/query_ensembl.html; pygr, http://code.google.com/p/pygr/wiki/pygronensembl) apis have been created. as yet, these do not encompass the full scope of ensembl, and hence do not include consequence prediction functionality.the snp effect predictor tool can be used to quickly and accurately predict the effects of variants on ensembl-annotated transcripts. up to 750 variant loci can be uploaded in a file to http://www.ensembl.org/, with the time taken to return results scaling linearly with the number of variants uploaded within a species; calculation time will also vary by species depending on the number of transcripts. a file containing 750 variants in homo sapiens takes 35 s to return results; an equivalent calculation in danio rerio takes 20 s. users with more than 750 variants may download a standalone script to run locally that produces identical results. the script can be configured to connect to both the public ensembl database as well as any combination of local and remote databases. a wider range of input file formats is also supported, including the commonly used pileup variant format. the provision of a simple web interface to powerful algorithms that transparently process large data volumes is a valuable asset to users without computing expertise, and also to those who need a quick and easy way to retrieve annotation for novel variants. having this tool integrated with the extensive, rich annotation available on the ensembl website will facilitate interpretation and analysis of the data. direct use of the ensembl variation api enables users to incorporate consequence prediction into their variation software and pipelines, providing predicted consequences for an unlimited number of variants. by optimizing code and database access times it is possible to retrieve consequences for 1000 distinct variants in h.sapiens in 30 s; for d.rerio this takes 15 s. the flexibility of the ensembl api means that consequences can be predicted for any species with an ensembl gene set, or using any valid ensembl database on users own systems. using these features in coalition with others in the api enables the creation of advanced pipelines that can produce biologically important information from high-throughput experimental data. such information is invaluable both as a screening system for variants and as an aid in the study of phenotypically linked variants.  
