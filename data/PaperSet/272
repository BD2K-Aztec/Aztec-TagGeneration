An algorithm to detect and communicate the differences in computational models describing biological systems Motivation: Repositories support the reuse of models and ensure transparency about results in publications linked to those models. With thousands of models available in repositories, such as the BioModels database or the Physiome Model Repository, a framework to track the differences between models and their versions is essential to compare and combine models. Difference detection not only allows users to study the history of models but also helps in the detection of errors and inconsistencies. Existing repositories lack algorithms to track a models development over time. Results: Focusing on SBML and CellML, we present an algorithm to accurately detect and describe differences between coexisting versions of a model with respect to (i) the models encoding, (ii) the structure of biological networks and (iii) mathematical expressions. This algorithm is implemented in a comprehensive and open source library called BiVeS. BiVeS helps to identify and characterize changes in computational models and thereby contributes to the documentation of a models history. Our work facilitates the reuse and extension of existing models and supports collaborative modelling. Finally, it contributes to better reproducibility of modelling results and to the challenge of model provenance. Availability and implementation: The workflow described in this article is implemented in BiVeS. BiVeS is freely available as source code and binary from sems.uni-rostock.de. The web interface BudHat demonstrates the capabilities of BiVeS atModelling and simulation is a standard approach to investigate complex biological processes. A steadily increasing number of computational models are available from open repositories such as the BioModels database or the Physiome Model Repository (PMR2;). These repositories provide the infrastructure necessary to maintain model code and associated metadata. The distribution of models through these repositories accelerates collaborative research and encourages model reuse.The reusability of models improves the modelling workflow, by reducing errors and saving time. Tracking the evolution of a model, that is providing information about changes in the model and its encoding, plays an important role in supporting the user . The need of model version control has been emphasized repeatedly on several occasions .Models are continuously modified. Consequently, new versions of a model are regularly being generated. We observe three major steps in model development that result in new versions: during the design phase of models; later on during curation and error correction and with updates of the format specification. Here, we present an algorithm to detect and communicate differences between these coexisting versions of an SBML or CellML model. We implemented this algorithm in a software library, BiVeS. Together, our work helps to identify and characterize the changes and thereby contributes to the documentation of a models history.BiVeS detects the differences between model versions.exemplifies the method, showing two versions of a minimalist model, following the SBML structure. Here, the reaction C D E (left) is updated to D H E (right). First, the model files are transformed into internal tree representations and prepared for the subsequent mapping procedure (row one, pre-processing). The weights x of nodes in the tree are computed according to the size of the corresponding subtrees. For example, the subtree rooted in B is larger than the subtree rooted in F and, thus, Bs weight is greater than Fs (namely x 4 and x 2, respectively). The mapping procedure starts in row two ofwith a mapping by id. Since the id attribute plays a key role and many elements do carry id attributes, the algorithm typically finds a large number of mappings at this early stage. In our example, only the identifiers of the G-nodes are identical (idreaction1) and thus only a single connection is found (for demonstration purposes, we assume that the D-nodes do not carry id attributes). The mapping by id phase is followed by a bottom-up propagation (row three), which makes use of the parentchild relation of nodes in the trees: For nodes that are mapped already, there is a good chance that their parents also stem from each other. In the example, the mapping of the G-nodes is propagated towards the roots of the trees and the A-F-G-paths in both model versions are mapped. Afterwards, the algorithm tries to map subtrees with an equal signature (row four, top-down propagation). The signatures r, which are computed in the pre-processing step, uniquely identify the subtrees. Here, only the signatures of the D-nodes are equal (r x), which is why D is the only candidate for a mapping. Since the D-nodes originate from each other, as well as the A-nodes do, a mapping of the B-nodes is added. Following the propagation phases, the algorithm tries to connect unmapped children of mapped nodes (row five, optimization). In our example, only the B-nodes have unmapped children: Nodes C and E in version 1 and nodes E and H in version 2 do not yet have partners. To find a mapping of these children, a 2 2 distance matrix is created. The elements in this matrix represent differences between the attributes of the corresponding nodes. The E-nodes only differ in the value of the concentration attribute. Changing the value of one single attribute in a species is a minor update and, thus, the nodes distance is very small. In contrast, the nodes C, E and H do not have anything in common. Consequently, the E-nodes will be mapped, while C and H remain unmapped. Finally, the resulting mapping is analysed (row six, evaluation). For example, the algorithm detects that C was deleted, D was inserted and E was modified in version 2. The difference graph, as obtained when interpreting the results of the evaluation step, is shown on the bottom of. Particular means of communicating the differences are described with. The Supplementary Material contains a more detailed, real-life showcase for difference detection with BiVeS. BiVeS communicates the differences. BiVeS exports the difference graph in several output formats, including computer-digestible XML code and a graphical representation. One type of output are XML-encoded, machine readable deltas, which describe the difference between two versions of a model (see Section 2.4). A remarkable feature of these deltas is their completeness. They can be inverted and composed . That means, given one model version and the delta, the opposite version can be retrieved . Another major feature is the translation of the delta into human readable formats (refer to the communication step in). BiVeS, for example, summarizes the model-related changes in a text-based report. This type of output is ideally suited to be integrated in other tools. Specifically, the report is encoded in MarkDown, ReStructuredText or HTML. MarkDown and ReStructuredText are themselves already easy to read and can be converted to common markup languages. The report in HTML format is generated for convenience, e.g. to instantly display the changes on a web page.shows a sample report. Another notable feature is the encoding of differences between two versions of a model in standard graph representations enabling a subsequent visualization. While BiVeS is itself not able to produce rendered graphical output, it exports different graphical notations, including GraphML, Dot or JSON (json.org). Armed with this, it is effortlessly possible to produce visualizations, as implemented in the demonstrator BudHat. BudHat demonstrates the advantages of our algorithm. As a proof of concept, we implemented a web-based interface BudHat (budhat.sems.uni-rostock.de), which uses BiVeS to compare versions of a computational model. BudHat contains a rudimentary user management and stores models in a database back-end. It calls BiVeS for the comparison and displays the obtained results in the web browser. The different visualizations that are possible in BudHat are shown in. All figures show the difference between versions 2007-06-05 and 2013-11-03 of model BIOMD0000000107 in the BioModels database. More specifically, BudHat provides access to (i) the reaction network highlighting the changes, as shown in; (ii) the HTML report of the changes, as shown inand (iii) the delta encoded in XML, as shown in. Delta and report are directly passed to the web interface. But as stated above, BiVeS exports the graph representing the reaction network in an exchangeable format (in this case it is GraphML or JSON). Therefore, BudHat uses either CytoscapeWeb or CytoscapeJS (cytoscape.github.io/cytoscape.js) to display the highlighted reaction network. From, it is easy to see that the role of cdc2 in reaction cyclin-cdc2 dimer formation has changed. In the former version, cdc2 modified this reaction, but this modification was deleted (deletion is highlighted by the red edge). Instead, in the updated version, cdc2 is one of the reactants for this reaction (insertion is indicated by the blue edge). Since this modification changed the reaction, the node representing the reaction is coloured in yellow. This approach makes it much easier to understand the differences, compared to a pure textual diff. Already for this small example, it would be much more effort to see and understand what happened to a model from the sources or from the 1559 lines of output reported by Unix diff.BiVeS helps grasping the changes. Our algorithm filters the identified differences and drops all but biologically and mathematically relevant modifications. We are currently working on refining these filters using an ontology for differences. We envision that this ontology, together with tools for semi-automatic annotation, will help reduce the number of displayed changes to the ones that are meaningful or requested by the user . BiVeS produces reports and graphical representations of changes using open formats such as GraphML, HTML or Markdown and thereby helps to communicate the changes. For example,shows that the graphical representation supports users in exploring the changes affecting the biological network. Additionally, a comprehensive list of changes is compiled into a human readable report, as shown in. Reports are particularly suitable for people interested in the details of mathematical changes. BiVeS outputs can of course be used by other tools for further processing of results. Current limitations with respect to output formats are missing support for the SBGN format and suitable graphical representations of models that do not specify a reaction network.You can easily integrate BiVeS with your tools. BiVeS can be used in three different ways: first, the BiVeS Java library provides a smart API for comparison of model versions. The differences can then be obtained in various formats, as described earlier. This API is, for instance, used by our open source tool BudHat, providing plenty of example code. Second, BiVeS is available as a web service to facilitate the integration with non-Java applications. The corresponding package can be installed on Java-based web servers, such as Apache Tomcat (tomcat.apache.org). The Functional Curation (chaste. cs.ox.ac.uk/FunctionalCuration) project of Chaste , for example, uses the BiVeS web service to track the evolution of models uploaded to their system. Third, the library is shipped with a main class and, therefore, it can be executed on a command line. The data management platform SEEK , for example, implemented support for model version control calling BiVeS on a separate command line. The web site at sems. uni-rostock.de/bives offers further information about the three implementations, including examples, how-tos, the source code and binaries of our tools. BiVeS currently supports SBML and CellML, but it could also be extended towards other XML-based model exchange formats such as NeuroML or PharmML . Moreover, BiVeS could improve version control of simulation descriptions [e.g. differences between two simulation setups encoded in the Simulation Experiment Description Markup Language (SED-ML),. In summary, BiVeS improves the detection of differences between versions of models in SBML or CellML format. Returning to the seven W-questions from the introduction, BiVeS contributes to the What and How as defined in . The What refers to content-related events, such as modifications of parameter values in the model, and non-content-related events, such as the upgrade to a new SBML version. In addition, BiVeS tells you How the What has changed. There is scope for further extensions to provide hypotheses for the Why. 
